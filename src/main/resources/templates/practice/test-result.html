<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Login</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <style>
        .question-number{
            font-weight: bold;
        }

        .choices-section .choice input[type="radio"] {
            transform: scale(1.5);
            margin-right: 10px;
        }

        .choice{
            margin: 20px;
        }

        .part-title{
            color: #1d0f7a;
        }

        .question-square{
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            border: 1px solid;
            border-color: #0d0b73;
            cursor: pointer; /* Add cursor pointer to indicate interactivity */
        }

        .question-square:hover {
            background-color: #0d0b73;
            color: #dadae8;
        }

        .question-square.active {
            background-color: #0d0b73;
            color: #dadae8;
        }

        .question-square.selected {
            background-color: #0d0b73;
            color: #dadae8;
        }

        .fixed-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            bottom: 0;
            overflow-y: auto;
        }

    </style>
</head>
<body>
<section layout:fragment="content" class="container mt-5">
    <!-- Your existing content -->
    <div class="container" th:object="${examTest}">
        <span id="mins" th:text="${mins}" style="display:none;"></span>
        <h4 th:text="*{title}"></h4>

        <div class="row d-flex">
            <div class="col-md-9 mr-2 border border-dark overflow-auto" style="max-height:135vh;">
                <div class="question" th:each="question : *{questions}">
                    <p class="question-number" th:text="'Câu ' + ${question.number} +':'" th:attr="id='question-' + ${question.number}"></p>

                    <img th:if="${question.imageUrl}" th:src="@{/images/test-images/{title}/{imageFileName}(title=${examTest.title}, imageFileName=${question.imageUrl})}" />

                    <!-- Display audio if audioUrl is present -->
                    <audio th:if="${question.audioUrl}" controls>
                        <source th:src="@{/audio/test-audio/{title}/{audioFileName}(title=${examTest.title}, audioFileName=${question.audioUrl})}" type="audio/mpeg">
                    </audio>
                    <p class="question-text" th:if="${question.question}" th:text="${question.question}"></p>
                    <!--Choices will be displayed here-->
                    <div class="mt-3 mb-5 choices-section">
                        <div class="choice">
                            <label th:for="'question-' + ${question.questionId} + '-A'" th:text="${question.optionA}"></label>
                        </div>
                        <div class="choice">
                            <label th:for="'question-' + ${question.questionId} + '-B'" th:text="${question.optionB}"></label>
                        </div>
                        <div class="choice">
                            <label th:for="'question-' + ${question.questionId} + '-C'" th:text="${question.optionC}"></label>
                        </div>
                        <div class="choice">
                            <label th:for="'question-' + ${question.questionId} + '-D'" th:text="${question.optionD}"></label>
                        </div>

                    </div>

                    <p class="script-and-explain" th:if="${question.script}" th:text="${question.script}"></p>
                </div>


            </div>
            <div class="col-md-3 border border-dark h-100" >
                <div class="row">
                    <div id="result-info" class="col-md-12 d-flex flex-column justify-content-center">
                        <p class="w-100 text-center"> Kết quả bài thi:</p>


                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="row">
                            <div class="col-md-12">
                                <h5 class="part-title">Part 1</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart1}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}"  th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>

                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 2</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart2}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}" th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>

                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 3</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart3}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}" th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 4</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart4}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}" th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 5</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart5}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}" th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 6</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart6}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}"  th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <h5 class="part-title">Part 7</h5>
                                <div class="row" >
                                    <div class="col-md-2 question-square m-1" th:each="question : ${questionsOfPart7}" th:text="${question.number}"  th:attr="data-question-id=${question.questionId}" th:onclick="'onJumpToQuestion(\'' + ${question.number} + '\')'"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>


        </div>


    </div>



    <script th:inline="javascript">
        function onJumpToQuestion(questionNumber) {
               document.getElementById('question-' + questionNumber).scrollIntoView({ behavior: 'instant' });
           }
    </script>


</section>

</body>

</html>
